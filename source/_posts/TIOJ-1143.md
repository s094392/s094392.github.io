---
title: TIOJ 1143. 4.靈犬尋寶
date: 2017-03-12 00:59:05
tags: [TIOJ]
categories: [Algorithm]
---
[TIOJ-1025](http://tioj.infor.org/problems/1025)

BFS
我也不知道為啥寫得這麼醜，可能跟我一樣吧
<!--more-->

```cpp
#include<bits/stdc++.h>
struct Case{
    int x, y, t;
};
Case C[10005];
int m[105][105], c[105][105];
int main(){
    int n, x, y, bx, by, top=0, bot=0 ,a ,b;
    scanf("%d", &n);
    for(int i=0; i<n; i++){
        scanf("%d%d", &a, &b);
        m[a+3][b+3] = 1;
    }
    scanf("%d%d", &x, &y);
    scanf("%d%d", &bx, &by);
    bx+=3;
    by+=3;
    C[top].x = x+3;
    C[top].y = y+3;
    C[top].t = 0;
    bot++;
    memset(c, 0, sizeof(c));
    while((C[top].x!=bx||C[top].y!=by)&&top!=bot){
        if(!(C[top].x<3||C[top].x>102||C[top].y<3||C[top].y>102)){
            if(!m[C[top].x+1][C[top].y]){
                if(!c[C[top].x+3][C[top].y+1]&&!m[C[top].x+3][C[top].y+1]){
                    c[C[top].x+3][C[top].y+1]++;
                    C[bot].x = C[top].x+3;
                    C[bot].y = C[top].y+1;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
                if(!c[C[top].x+3][C[top].y-1]&&!m[C[top].x+3][C[top].y-1]){
                    c[C[top].x+3][C[top].y-1]++;
                    C[bot].x = C[top].x+3;
                    C[bot].y = C[top].y-1;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
            }
            if(!m[C[top].x-1][C[top].y]){
                if(!c[C[top].x-3][C[top].y+1]&&!m[C[top].x-3][C[top].y+1]){
                    c[C[top].x-3][C[top].y+1]++;
                    C[bot].x = C[top].x-3;
                    C[bot].y = C[top].y+1;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
                if(!c[C[top].x-3][C[top].y-1]&&!m[C[top].x-3][C[top].y-1]){
                    c[C[top].x-3][C[top].y-1]++;
                    C[bot].x = C[top].x-3;
                    C[bot].y = C[top].y-1;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
            }
            if(!m[C[top].x][C[top].y+1]){
                if(!c[C[top].x+1][C[top].y+3]&&!m[C[top].x+1][C[top].y+3]){
                    c[C[top].x+1][C[top].y+3]++;
                    C[bot].x = C[top].x+1;
                    C[bot].y = C[top].y+3;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
                if(!c[C[top].x-1][C[top].y+3]&&!m[C[top].x-1][C[top].y+3]){
                    c[C[top].x-1][C[top].y+3]++;
                    C[bot].x = C[top].x-1;
                    C[bot].y = C[top].y+3;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
            }
            if(!m[C[top].x][C[top].y-1]){
                if(!c[C[top].x+1][C[top].y-3]&&!m[C[top].x+1][C[top].y-3]){
                    c[C[top].x+1][C[top].y-3]++;
                    C[bot].x = C[top].x+1;
                    C[bot].y = C[top].y-3;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
                if(!c[C[top].x-1][C[top].y-3]&&!m[C[top].x-1][C[top].y-3]){
                    c[C[top].x-1][C[top].y-3]++;
                    C[bot].x = C[top].x-1;
                    C[bot].y = C[top].y-3;
                    C[bot].t = C[top].t+1;
                    bot++;
                }
            }
        }
        top++;
    }
    if(C[top].t==0) printf("impossible\n");
    else printf("%d\n", C[top].t);
}
```
