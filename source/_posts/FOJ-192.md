---
title: FOJ 192. Fences
date: 2017-09-19 00:10:29
tags: [FOJ]
categories: [Algorithm]
---
競程作業，2017 TOPC Problem E：[FOJ-192](https://oj.nctu.me/problems/192/)

題目是要你算出大圓面積跟裡面的小多邊形面積的差
大圓直接算就好了
小多邊形的面積有點麻煩，要拿已知的條件去二分搜，猜出他的外接圓半徑
高級題解在這：[https://hackmd.io/s/Hy6LFym_b](https://hackmd.io/s/Hy6LFym_b)
<!--more-->

這題我超雷，因為 C 的 abs 是專屬整數用的
浮點數要用 fabs
但是 C++ 是通用
結果我自己跑都很正常但是送出去一直 WA
QQ

```cpp
#include<stdio.h>
#include<math.h>
#include<iomanip>
#include<iostream>
#include<stdlib.h>
#define _USE_MATH_DEFINES
#define RNAGE 1e-9

int main(){
  int t, n;
  std::cin>>t;
  // scanf("%d", &t);
  while(t--){
    double c, L, R, M, Max, tal, big;
    double ll[10010];
    bool flag;

    flag = 0;
    big = 0;
    std::cin>>c>>n;
    // scanf("%lf%d", &c, &n);
    for(int i=0; i<n; i++){
      std::cin>>ll[i];
      // scanf("%lf", &ll[i]);
      if(ll[i]>big) big = ll[i];
    }
    L = big/2;
    R = c;
    // int k=1000;

    Max = -1;
    tal = 0;
    M = big/2;
    double dtmp;
    for(int i=0; i<n; i++){
      dtmp = asin(ll[i]/(2*M))*2;
      // l[i] = acos((2*M*M - ll[i]*ll[i])/(2*M*M));
      // printf("%f ", (2*M*M - ll[i]*ll[i])/(2*M*M));
      if (dtmp>Max) Max = dtmp;
      tal += dtmp;
    }
    if(fabs(tal-Max*2-0.0)<RNAGE){
      M = M;
//      std::cout<<tal<<" "<<Max<<" "<<abs(tal-Max*2)<<"\n";
    }
    else if(tal-Max*2<0){
      while(1){
        flag = 1;
        // printf("up\n");
        M = (L + R)/2;
        Max = 0;
        tal = 0;
        double dtmp;
        // printf("MMMMM::::%f\n", M);
        for(int i=0; i<n; i++){

          dtmp = asin(ll[i]/(2*M))*2;
          // l[i] = acos((2*M*M - ll[i]*ll[i])/(2*M*M));
          // printf("%f ", (2*M*M - ll[i]*ll[i])/(2*M*M));
          if (dtmp>Max) Max = dtmp;
          tal += dtmp;
        }
        tal-=Max;
        // printf("\n");
        // printf("%f %f %f %f %f %f\n",l[0], l[1], l[2], Max, tal, tal-Max);
        // now = tal-Max;
        if(fabs(tal-Max)<=RNAGE) break;
        else if(tal-Max>RNAGE){
          // printf("kkkkk\n");
          R = M;
        }
        else if(tal-Max<-RNAGE){
          // printf("jizz\n");
          L = M;
        }
      }
    }
    // else if(tal-Max*2>0){
    else{
      while(1){
        M = (L + R)/2;
        Max = 0;
        tal = 0;
        double dtmp;
        // printf("MMMMM::::%f\n", M);
        for(int i=0; i<n; i++){
          dtmp = asin(ll[i]/(2*M))*2;
          // l[i] = acos((2*M*M - ll[i]*ll[i])/(2*M*M));
          // printf("%f ", (2*M*M - ll[i]*ll[i])/(2*M*M));
          if (dtmp>Max) Max = dtmp;
          tal += dtmp;
        }
        // printf("\n");
        // printf("%f %f %f %f %f %f\n",l[0], l[1], l[2], Max, tal, tal-Max);

        if((tal-2*M_PI)<-RNAGE){
          R = M;
        }
        else if((tal-2*M_PI)>RNAGE){
          // printf("jizz");
          L = M;
        }
        else break;
      }
    }

    // printf("%f %f %f %f %f\n", Max, tal, l[0], l[1], l[2]);

    double bigO = (c/M_PI/2)*(c/M_PI/2)*M_PI;
    double smallO = 0;
    double s;

    for(int i=0; i<n; i++){
      s = (M+M+ll[i])/2;
      smallO+=sqrt(s*(s-M)*(s-M)*(s-ll[i]));
    }
    if(flag){
      s = (M+M+big)/2;
      smallO-=sqrt(s*(s-M)*(s-M)*(s-big));
      smallO-=sqrt(s*(s-M)*(s-M)*(s-big));
    }
    // printf("%lf\n", smallO);
    // printf("%lf\n", M);
    // printf("%lf\n", bigO-smallO);
//    std::cout<<M<<"\n";
    std::cout<<std::setprecision(15)<<bigO-smallO<<"\n";
  }
}
```
